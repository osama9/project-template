function setMetronicActiveLink(){var t=location.pathname.toLocaleLowerCase(),n='<span class="selected"><\/span>';$(".nav-item a").each(function(i,r){var u=$(r).attr("href"),e,f;u&&(u=u.toLowerCase(),u.endsWith(t)&&(e=$(r),f=e.parents(".nav-item"),f.addClass("active"),f.addClass("open"),f.find("a").append(n),$(r).closest("li").addClass("active"),$(r).append(n)))})}function block(n){var t={},i=$(n);i.height()<=$(window).height()&&(t.cenrerY=!0);i.block({message:'<div class="loading-message loading-message-boxed"><img src="/images/loading-spinner-grey.gif" align=""><span>&nbsp;&nbsp; جاري التحميل ... <\/span><\/div>',baseZ:1e3,centerY:t.cenrerY!==undefined?t.cenrerY:!1,css:{top:"10%",border:"0",padding:"0",backgroundColor:"none"},overlayCSS:{backgroundColor:"#555",opacity:.05,cursor:"wait"}})}function unblock(n){$(n).unblock()}function onAjaxBegin(n){block(n)}function onAjaxFailed(n){var t=n.responseJSON;t||(t=n)}function onAjaxSuccess(n,t,i){i&&$(i).modal("hide")}function onAjaxComplete(n,t,i,r,u,f){var e=n.responseJSON;e||(e=n);e&&(e.isRedirect&&(window.location.href=e.redirectUrl),e.success&&(e.partialViewHtml?$(u).html(e.partialViewHtml):$(u).html(e.responseText)),showAlert(e.alert,r));f&&refreshUnobtrusiveValidation(f);initICheck();FormRepeater.init();initAspSelect2(f);unblock(i)}function clearFromData(n){$(":input",n).not(":button, :submit,:checkbox, :radio, :reset, :hidden").removeAttr("checked").removeAttr("selected").val("");$(":input",n).each(function(){var n=$(this).data("fileinput");n&&$(this).fileinput("clear")});clearICheck();initAspSelect2()}function clearFormValidation(n){var t=$(n);t.find("[data-valmsg-summary=true]").removeClass("validation-summary-errors").addClass("validation-summary-valid").find("ul").empty();t.find("[data-valmsg-replace]").removeClass("field-validation-error").addClass("field-validation-valid").empty();t.find("[data-val=true]").removeClass("text-danger");t.find(".form-group").removeClass("has-error").removeClass("has-success");t.find("[data-alert]").empty()}function setupResetForms(){var n='[data-reset-form*="true"]';$(n).on("show.bs.modal",function(n){var i=$(n.target),t=i.find("form");t&&(refreshUnobtrusiveValidation(t),clearFormValidation(t))});$(n).on("shown.bs.modal",function(n){var i=$(n.target),t=i.find("form");t&&clearFromData(t)})}function setupConfirm(){$("#confirm-modal").on("show.bs.modal",function(n){var t=$(n.relatedTarget),i=t.data("action");$("#confirm-form").attr("action",i)});$("#confirm-ajax-modal").on("show.bs.modal",function(n){$("#confirm-ajax-alert").html("");var i=$(n.relatedTarget),u=i.data("action"),t=i.data("on-success"),r=$("#confirm-ajax-form").attr("data-ajax-success");t||(t="updateList();");r.includes(t)||$("#confirm-ajax-form").attr("data-ajax-success",r+";"+t);$("#confirm-ajax-form").attr("action",u)})}function updateContainer(n,t){var r=$.Deferred(),u=$("[data-page]",t),i;return u&&(i=u.attr("data-page"),n.includes("?")?n+="&PageNumber="+i:typeof i!="undefined"&&(n+="?PageNumber="+i)),$.ajax(n,{method:"GET",beforeSend:function(){block(t)},complete:function(){unblock(t)},success:function(n){typeof n=="object"?$(t).html(n.partialViewHtml):$(t).html(n);r.resolve(n)},error:function(){r.reject}}),r.promise()}function showModal(n){$(n).modal("show")}function hideModal(n){$(n).modal("hide")}function refreshUnobtrusiveValidation(n){var t=$(n);t.removeData("validator");t.removeData("unobtrusiveValidation");$.validator.unobtrusive.parse(t);$(n).validateBootstrap(!0)}function clearSearch(n){var i=$(n).data("id"),t;$(i).val("");$(n).val("");t=$(n).closest("form");$(t).trigger("reset");initAspSelect2(t.attr("id"));$(t).submit()}function setupClearModalErrorAlert(){$(".modal").on("show.bs.modal",function(){var n=$($(this).find("[data-alert]"));(n||n.length>0)&&n.html("")})}function initAspSelect2(n){n?$(n).find('[class^="asp-select2-"]').each(function(n,t){reInitAspSelect2(t,!0)}):$('[class^="asp-select2-"]').each(function(n,t){reInitAspSelect2(t)})}function reInitAspSelect2(n,t=false){var i=".asp-select2-"+$(n).attr("id");$(i).each(function(n,i){var r=$(i);r.data("select2")&&(r.select2("destroy"),r.off("change"),t&&r.valid());AppSelect2.init(i)})}$(function(){setupConfirm();setupResetForms();initICheck();setupClearModalErrorAlert();initAspSelect2()});